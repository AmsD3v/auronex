---
alwaysApply: true
---

# Git Commit Convention - Auronex

## Regra: 1 Tarefa = 1 Commit

**SEMPRE faÃ§a commits atÃ´micos e descritivos!**

---

## ğŸ“ Formato ObrigatÃ³rio

### Estrutura:
```
<tipo>: <descriÃ§Ã£o curta>

[corpo opcional]

[footer opcional]
```

### Tipos Permitidos:

- **feat:** Nova funcionalidade
- **fix:** CorreÃ§Ã£o de bug
- **docs:** Apenas documentaÃ§Ã£o
- **style:** FormataÃ§Ã£o (sem mudanÃ§a de lÃ³gica)
- **refactor:** RefatoraÃ§Ã£o (sem feat/fix)
- **perf:** Melhoria de performance
- **test:** Adicionar/corrigir testes
- **chore:** Tarefas de manutenÃ§Ã£o

---

## âœ… Exemplos CORRETOS

### Features:
```bash
git commit -m "feat: Adiciona autenticaÃ§Ã£o JWT com refresh token"
git commit -m "feat: Implementa circuit breaker no bot apÃ³s 5 perdas"
git commit -m "feat: Adiciona validaÃ§Ã£o de senha forte (8+ chars)"
```

### Fixes:
```bash
git commit -m "fix: Corrige criptografia hardcoded - agora usa .env"
git commit -m "fix: Corrige CORS wildcard - lista explÃ­cita de origens"
git commit -m "fix: Corrige bypass de validaÃ§Ã£o de capital"
```

### Docs:
```bash
git commit -m "docs: Atualiza README com novas funcionalidades"
git commit -m "docs: Adiciona auditoria tÃ©cnica completa"
git commit -m "docs: Atualiza CHANGELOG v1.0.06"
```

### Performance:
```bash
git commit -m "perf: Adiciona 12 Ã­ndices no banco de dados"
git commit -m "perf: Implementa cache Redis para cotaÃ§Ãµes"
```

### Refactor:
```bash
git commit -m "refactor: Extrai validaÃ§Ãµes para mÃ³dulo separado"
git commit -m "refactor: Move rate limiter para dependencies.py"
```

---

## âŒ Exemplos INCORRETOS

```bash
# âŒ Muito vago
git commit -m "update"
git commit -m "fix bug"
git commit -m "changes"

# âŒ MÃºltiplas tarefas em 1 commit
git commit -m "feat: Login + Dashboard + Bots + API Keys"

# âŒ Sem tipo
git commit -m "adiciona autenticaÃ§Ã£o"

# âŒ Tipo errado
git commit -m "feature: adiciona login"  # âŒ deve ser "feat:"
```

---

## ğŸ¯ Workflow Recomendado

### Para Cada Funcionalidade:

```bash
# 1. Implementar UMA funcionalidade
# (ex: adicionar refresh token)

# 2. Testar completamente
# (verificar se funciona)

# 3. Commit descritivo
git add fastapi_app/auth.py fastapi_app/routers/auth.py
git commit -m "feat: Implementa refresh token JWT (15min + 7 dias)"

# 4. PrÃ³xima funcionalidade
# (ex: adicionar rate limiting)

# 5. Testar

# 6. Commit separado
git add fastapi_app/rate_limiter.py fastapi_app/routers/auth.py
git commit -m "feat: Adiciona rate limiting em login (5 tentativas/min)"
```

---

## ğŸ“Š Mensagens Detalhadas (Opcional)

### Com Corpo:
```bash
git commit -m "feat: Adiciona autenticaÃ§Ã£o JWT

- Access token: 15 minutos
- Refresh token: 7 dias
- Endpoint /api/auth/refresh implementado
- CompatÃ­vel com frontend React"
```

### Com Breaking Changes:
```bash
git commit -m "feat: Adiciona autenticaÃ§Ã£o obrigatÃ³ria em endpoints

BREAKING CHANGE: Endpoints /api/exchange/balance e /api/trades/*
agora exigem token JWT. Frontend precisa incluir Authorization header."
```

---

## ğŸ”§ Commits de Bugfix

### Durante Desenvolvimento:
```bash
git commit -m "fix: Adiciona load_dotenv() em auth.py"
git commit -m "fix: Adiciona import logger em bots.py"
git commit -m "fix: Corrige indentaÃ§Ã£o em exchange.py"
```

### ApÃ³s Deploy:
```bash
git commit -m "fix: Corrige login retornando 401 (hash incompatÃ­vel)"
git commit -m "fix: Corrige dashboard travado em carregando"
```

---

## ğŸ“š Commits de DocumentaÃ§Ã£o

```bash
git commit -m "docs: Adiciona auditoria tÃ©cnica completa (43 problemas)"
git commit -m "docs: Atualiza CHANGELOG para v1.0.06"
git commit -m "docs: Adiciona guias de configuraÃ§Ã£o .env"
```

---

## ğŸ¯ Regras Importantes

### SEMPRE:
- 1 funcionalidade = 1 commit
- Mensagem clara (o QUE foi feito, nÃ£o COMO)
- Tipo correto (feat/fix/docs)
- Testar antes de commitar
- Commits pequenos e frequentes

### NUNCA:
- Commits gigantes (100+ arquivos)
- Mensagens vagas ("update", "fix")
- MÃºltiplas features em 1 commit
- Commitar cÃ³digo nÃ£o testado
- Commitar com erros de lint

---

## ğŸ“… Exemplo de Workflow de 1 Dia

```bash
# ManhÃ£: Implementar seguranÃ§a
git commit -m "feat: Adiciona criptografia segura via .env"
git commit -m "feat: Implementa CORS restrito com lista explÃ­cita"
git commit -m "feat: Adiciona refresh token JWT"

# Tarde: Implementar validaÃ§Ãµes
git commit -m "feat: Adiciona validaÃ§Ã£o de senha forte"
git commit -m "feat: Implementa rate limiting em login"
git commit -m "feat: Adiciona validaÃ§Ã£o de sÃ­mbolos na exchange"

# Noite: Performance
git commit -m "perf: Adiciona 12 Ã­ndices no banco de dados"

# Bugfixes encontrados
git commit -m "fix: Adiciona load_dotenv() em mÃ³dulos principais"
git commit -m "fix: Corrige import logger em routers"

# DocumentaÃ§Ã£o
git commit -m "docs: Adiciona auditoria tÃ©cnica completa"
git commit -m "docs: Atualiza CHANGELOG v1.0.06"
```

**Total:** 11 commits bem organizados! âœ…

---

## ğŸš€ Push para ProduÃ§Ã£o

### ApÃ³s Testar Local:
```bash
# Ver commits
git log --oneline -10

# Push
git push origin main
```

### No Servidor:
```bash
ssh usuario@auronex.com.br
cd /home/serverhome/auronex
git pull origin main

# Ver o que foi atualizado
git log --oneline -10

# Deploy
./DEPLOY_PRODUCAO_COM_ENV.sh
```

---

## ğŸ“Š BenefÃ­cios

### Commits AtÃ´micos:
- âœ… FÃ¡cil reverter features especÃ­ficas
- âœ… HistÃ³rico limpo e compreensÃ­vel
- âœ… Code review mais fÃ¡cil
- âœ… Bisect funciona melhor
- âœ… Cherry-pick possÃ­vel

### Mensagens Claras:
- âœ… Entender mudanÃ§as sem ler cÃ³digo
- âœ… Gerar CHANGELOG automaticamente
- âœ… Rastrear quando feature foi adicionada
- âœ… ComunicaÃ§Ã£o com equipe

---

## âœ… Checklist Antes de Commit

- [ ] CÃ³digo testado e funcionando?
- [ ] Sem erros de lint?
- [ ] Mensagem descritiva?
- [ ] Tipo correto (feat/fix/docs)?
- [ ] Apenas 1 funcionalidade?
- [ ] Arquivos relacionados incluÃ­dos?

**Se SIM para todos â†’ git commit!** âœ…

---

## ğŸ† Resultado

**Com commits organizados:**
- âœ… HistÃ³rico Git limpo
- âœ… FÃ¡cil reverter mudanÃ§as
- âœ… CHANGELOG automÃ¡tico
- âœ… ComunicaÃ§Ã£o clara
- âœ… Code review eficiente

**SEMPRE: 1 tarefa = 1 commit!** ğŸ“
